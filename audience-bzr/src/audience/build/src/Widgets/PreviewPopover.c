/* PreviewPopover.c generated by valac 0.28.0, the Vala compiler
 * generated from PreviewPopover.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/*-
 * Copyright (c) 2013-2014 Audience Developers (http://launchpad.net/pantheon-chat)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 * Authored by: Corentin NoÃ«l <corentin@elementaryos.org>
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <clutter/clutter.h>
#include <gst/gst.h>
#include <float.h>
#include <math.h>
#include <clutter-gtk/clutter-gtk.h>
#include <stdlib.h>
#include <string.h>
#include <gst/pbutils/pbutils.h>


#define AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER (audience_widgets_preview_popover_get_type ())
#define AUDIENCE_WIDGETS_PREVIEW_POPOVER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER, AudienceWidgetsPreviewPopover))
#define AUDIENCE_WIDGETS_PREVIEW_POPOVER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER, AudienceWidgetsPreviewPopoverClass))
#define AUDIENCE_WIDGETS_IS_PREVIEW_POPOVER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER))
#define AUDIENCE_WIDGETS_IS_PREVIEW_POPOVER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER))
#define AUDIENCE_WIDGETS_PREVIEW_POPOVER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER, AudienceWidgetsPreviewPopoverClass))

typedef struct _AudienceWidgetsPreviewPopover AudienceWidgetsPreviewPopover;
typedef struct _AudienceWidgetsPreviewPopoverClass AudienceWidgetsPreviewPopoverClass;
typedef struct _AudienceWidgetsPreviewPopoverPrivate AudienceWidgetsPreviewPopoverPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) ((var == NULL) ? NULL : (var = (g_free (var), NULL)))

#define TYPE_PLAY_FLAGS (play_flags_get_type ())
#define __g_list_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__g_object_unref0_ (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _Block2Data Block2Data;

struct _AudienceWidgetsPreviewPopover {
	GtkPopover parent_instance;
	AudienceWidgetsPreviewPopoverPrivate * priv;
	ClutterActor* preview_actor;
};

struct _AudienceWidgetsPreviewPopoverClass {
	GtkPopoverClass parent_class;
};

struct _AudienceWidgetsPreviewPopoverPrivate {
	GstElement* preview_playbin;
	ClutterTexture* video;
	gdouble ratio;
	guint* timer_id;
};

typedef enum  {
	PLAY_FLAGS_VIDEO = 1 << 0,
	PLAY_FLAGS_AUDIO = 1 << 1,
	PLAY_FLAGS_TEXT = 1 << 2,
	PLAY_FLAGS_VIS = 1 << 3,
	PLAY_FLAGS_SOFT_VOLUME = 1 << 4,
	PLAY_FLAGS_NATIVE_AUDIO = 1 << 5,
	PLAY_FLAGS_NATIVE_VIDEO = 1 << 6,
	PLAY_FLAGS_DOWNLOAD = 1 << 7,
	PLAY_FLAGS_BUFFERING = 1 << 8,
	PLAY_FLAGS_DEINTERLACE = 1 << 9,
	PLAY_FLAGS_SOFT_COLORBALANCE = 1 << 10
} PlayFlags;

struct _Block2Data {
	int _ref_count_;
	AudienceWidgetsPreviewPopover* self;
	gdouble progress;
};


static gpointer audience_widgets_preview_popover_parent_class = NULL;

GType audience_widgets_preview_popover_get_type (void) G_GNUC_CONST;
#define AUDIENCE_WIDGETS_PREVIEW_POPOVER_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER, AudienceWidgetsPreviewPopoverPrivate))
enum  {
	AUDIENCE_WIDGETS_PREVIEW_POPOVER_DUMMY_PROPERTY
};
AudienceWidgetsPreviewPopover* audience_widgets_preview_popover_new (void);
AudienceWidgetsPreviewPopover* audience_widgets_preview_popover_construct (GType object_type);
#define AUDIENCE_GLOBAL_OPACITY ((guint) 204)
static void __lambda21_ (AudienceWidgetsPreviewPopover* self, GstMessage* msg);
static void ___lambda21__gst_bus_message (GstBus* _sender, GstMessage* message, gpointer self);
static inline void _dynamic_set_texture0 (GstElement* obj, ClutterTexture* value);
static inline void _dynamic_set_video_sink1 (GstElement* obj, GstElement* value);
static void __lambda22_ (AudienceWidgetsPreviewPopover* self);
static void audience_widgets_preview_popover_cancel_loop_timer (AudienceWidgetsPreviewPopover* self);
static void ___lambda22__gtk_popover_closed (GtkPopover* _sender, gpointer self);
void audience_widgets_preview_popover_set_preview_uri (AudienceWidgetsPreviewPopover* self, const gchar* uri);
static inline void _dynamic_set_uri2 (GstElement* obj, const gchar* value);
GType play_flags_get_type (void) G_GNUC_CONST;
static void _g_object_unref0_ (gpointer var);
static void _g_list_free__g_object_unref0_ (GList* self);
void audience_widgets_preview_popover_set_preview_progress (AudienceWidgetsPreviewPopover* self, gdouble progress);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static gboolean __lambda23_ (Block2Data* _data2_);
static gboolean ___lambda23__gsource_func (gpointer self);
static guint* _uint_dup (guint* self);
static void audience_widgets_preview_popover_finalize (GObject* obj);


static void __lambda21_ (AudienceWidgetsPreviewPopover* self, GstMessage* msg) {
	GstMessage* _tmp0_ = NULL;
	GstMessageType _tmp1_ = 0;
#line 36 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_return_if_fail (msg != NULL);
#line 37 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp0_ = msg;
#line 37 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp1_ = _tmp0_->type;
#line 37 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	switch (_tmp1_) {
#line 37 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		case GST_MESSAGE_STATE_CHANGED:
#line 138 "PreviewPopover.c"
		{
#line 39 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			break;
#line 142 "PreviewPopover.c"
		}
#line 37 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		case GST_MESSAGE_ASYNC_DONE:
#line 146 "PreviewPopover.c"
		{
#line 41 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			break;
#line 150 "PreviewPopover.c"
		}
		default:
#line 37 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		break;
#line 155 "PreviewPopover.c"
	}
}


static void ___lambda21__gst_bus_message (GstBus* _sender, GstMessage* message, gpointer self) {
#line 36 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	__lambda21_ ((AudienceWidgetsPreviewPopover*) self, message);
#line 163 "PreviewPopover.c"
}


static inline void _dynamic_set_texture0 (GstElement* obj, ClutterTexture* value) {
#line 47 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_set (obj, "texture", value, NULL);
#line 170 "PreviewPopover.c"
}


static inline void _dynamic_set_video_sink1 (GstElement* obj, GstElement* value) {
#line 48 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_set (obj, "video-sink", value, NULL);
#line 177 "PreviewPopover.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 51 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return self ? g_object_ref (self) : NULL;
#line 184 "PreviewPopover.c"
}


static void __lambda22_ (AudienceWidgetsPreviewPopover* self) {
	GstElement* _tmp0_ = NULL;
#line 62 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp0_ = self->priv->preview_playbin;
#line 62 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gst_element_set_state (_tmp0_, GST_STATE_PAUSED);
#line 63 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	audience_widgets_preview_popover_cancel_loop_timer (self);
#line 196 "PreviewPopover.c"
}


static void ___lambda22__gtk_popover_closed (GtkPopover* _sender, gpointer self) {
#line 61 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	__lambda22_ ((AudienceWidgetsPreviewPopover*) self);
#line 203 "PreviewPopover.c"
}


AudienceWidgetsPreviewPopover* audience_widgets_preview_popover_construct (GType object_type) {
	AudienceWidgetsPreviewPopover * self = NULL;
	GstElement* _tmp0_ = NULL;
	GstElement* _tmp1_ = NULL;
	GstBus* _tmp2_ = NULL;
	GstBus* _tmp3_ = NULL;
	GstElement* _tmp4_ = NULL;
	GstBus* _tmp5_ = NULL;
	GstBus* _tmp6_ = NULL;
	ClutterTexture* _tmp7_ = NULL;
	GstElement* video_sink = NULL;
	GstElement* _tmp8_ = NULL;
	ClutterTexture* _tmp9_ = NULL;
	GstElement* _tmp10_ = NULL;
	GtkClutterEmbed* clutter = NULL;
	GtkClutterEmbed* _tmp11_ = NULL;
	ClutterStage* stage = NULL;
	ClutterActor* _tmp12_ = NULL;
	ClutterStage* _tmp13_ = NULL;
	ClutterColor _tmp14_ = {0};
	ClutterTexture* _tmp15_ = NULL;
	ClutterBindConstraint* _tmp16_ = NULL;
	ClutterBindConstraint* _tmp17_ = NULL;
	ClutterTexture* _tmp18_ = NULL;
	ClutterBindConstraint* _tmp19_ = NULL;
	ClutterBindConstraint* _tmp20_ = NULL;
	ClutterTexture* _tmp21_ = NULL;
#line 27 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self = (AudienceWidgetsPreviewPopover*) g_object_new (object_type, NULL);
#line 28 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gtk_widget_set_opacity ((GtkWidget*) self, (gdouble) AUDIENCE_GLOBAL_OPACITY);
#line 29 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_set ((GtkWidget*) self, "can-focus", FALSE, NULL);
#line 30 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gtk_widget_set_sensitive ((GtkWidget*) self, FALSE);
#line 31 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gtk_popover_set_modal ((GtkPopover*) self, FALSE);
#line 34 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp0_ = gst_element_factory_make ("playbin", "play");
#line 34 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	if (_tmp0_ != NULL) {
#line 34 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		g_object_ref_sink (_tmp0_);
#line 250 "PreviewPopover.c"
	}
#line 34 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (self->priv->preview_playbin);
#line 34 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self->priv->preview_playbin = _tmp0_;
#line 35 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp1_ = self->priv->preview_playbin;
#line 35 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp2_ = gst_element_get_bus (_tmp1_);
#line 35 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp3_ = _tmp2_;
#line 35 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gst_bus_add_signal_watch_full (_tmp3_, G_PRIORITY_DEFAULT);
#line 35 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (_tmp3_);
#line 36 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp4_ = self->priv->preview_playbin;
#line 36 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp5_ = gst_element_get_bus (_tmp4_);
#line 36 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp6_ = _tmp5_;
#line 36 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_signal_connect_object (_tmp6_, "message", (GCallback) ___lambda21__gst_bus_message, self, 0);
#line 36 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (_tmp6_);
#line 44 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp7_ = (ClutterTexture*) clutter_texture_new ();
#line 44 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_ref_sink (_tmp7_);
#line 44 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (self->priv->video);
#line 44 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self->priv->video = _tmp7_;
#line 46 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp8_ = gst_element_factory_make ("cluttersink", "source");
#line 46 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	if (_tmp8_ != NULL) {
#line 46 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		g_object_ref_sink (_tmp8_);
#line 290 "PreviewPopover.c"
	}
#line 46 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	video_sink = _tmp8_;
#line 47 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp9_ = self->priv->video;
#line 47 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_dynamic_set_texture0 (video_sink, _tmp9_);
#line 48 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp10_ = self->priv->preview_playbin;
#line 48 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_dynamic_set_video_sink1 (_tmp10_, video_sink);
#line 49 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp11_ = (GtkClutterEmbed*) gtk_clutter_embed_new ();
#line 49 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_ref_sink (_tmp11_);
#line 49 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	clutter = _tmp11_;
#line 50 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_set ((GtkWidget*) clutter, "margin", 6, NULL);
#line 51 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp12_ = gtk_clutter_embed_get_stage (clutter);
#line 51 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp13_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, clutter_stage_get_type (), ClutterStage));
#line 51 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	stage = _tmp13_;
#line 52 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp14_.red = (guint8) 0;
#line 52 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp14_.green = (guint8) 0;
#line 52 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp14_.blue = (guint8) 0;
#line 52 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp14_.alpha = (guint8) 0;
#line 52 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	clutter_actor_set_background_color ((ClutterActor*) stage, &_tmp14_);
#line 53 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	clutter_stage_set_use_alpha (stage, TRUE);
#line 55 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp15_ = self->priv->video;
#line 55 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp16_ = (ClutterBindConstraint*) clutter_bind_constraint_new ((ClutterActor*) stage, CLUTTER_BIND_WIDTH, (gfloat) 0);
#line 55 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_ref_sink (_tmp16_);
#line 55 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp17_ = _tmp16_;
#line 55 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	clutter_actor_add_constraint ((ClutterActor*) _tmp15_, (ClutterConstraint*) _tmp17_);
#line 55 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (_tmp17_);
#line 56 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp18_ = self->priv->video;
#line 56 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp19_ = (ClutterBindConstraint*) clutter_bind_constraint_new ((ClutterActor*) stage, CLUTTER_BIND_HEIGHT, (gfloat) 0);
#line 56 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_ref_sink (_tmp19_);
#line 56 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp20_ = _tmp19_;
#line 56 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	clutter_actor_add_constraint ((ClutterActor*) _tmp18_, (ClutterConstraint*) _tmp20_);
#line 56 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (_tmp20_);
#line 58 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp21_ = self->priv->video;
#line 58 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	clutter_actor_add_child ((ClutterActor*) stage, (ClutterActor*) _tmp21_);
#line 59 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) clutter);
#line 61 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_signal_connect_object ((GtkPopover*) self, "closed", (GCallback) ___lambda22__gtk_popover_closed, self, 0);
#line 27 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (stage);
#line 27 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (clutter);
#line 27 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (video_sink);
#line 27 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return self;
#line 368 "PreviewPopover.c"
}


AudienceWidgetsPreviewPopover* audience_widgets_preview_popover_new (void) {
#line 27 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return audience_widgets_preview_popover_construct (AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER);
#line 375 "PreviewPopover.c"
}


static inline void _dynamic_set_uri2 (GstElement* obj, const gchar* value) {
#line 69 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_set (obj, "uri", value, NULL);
#line 382 "PreviewPopover.c"
}


static void _g_object_unref0_ (gpointer var) {
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 389 "PreviewPopover.c"
}


static void _g_list_free__g_object_unref0_ (GList* self) {
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_list_foreach (self, (GFunc) _g_object_unref0_, NULL);
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_list_free (self);
#line 398 "PreviewPopover.c"
}


void audience_widgets_preview_popover_set_preview_uri (AudienceWidgetsPreviewPopover* self, const gchar* uri) {
	GstElement* _tmp0_ = NULL;
	GstElement* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	gint flags = 0;
	GstElement* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	GstElement* _tmp6_ = NULL;
	gint _tmp7_ = 0;
	GError * _inner_error_ = NULL;
#line 67 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_return_if_fail (self != NULL);
#line 67 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_return_if_fail (uri != NULL);
#line 68 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp0_ = self->priv->preview_playbin;
#line 68 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gst_element_set_state (_tmp0_, GST_STATE_READY);
#line 69 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp1_ = self->priv->preview_playbin;
#line 69 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp2_ = uri;
#line 69 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_dynamic_set_uri2 (_tmp1_, _tmp2_);
#line 71 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp3_ = self->priv->preview_playbin;
#line 71 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_get ((GObject*) _tmp3_, "flags", &flags, NULL);
#line 72 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp4_ = flags;
#line 72 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	flags = _tmp4_ & (~PLAY_FLAGS_TEXT);
#line 73 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp5_ = flags;
#line 73 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	flags = _tmp5_ & (~PLAY_FLAGS_AUDIO);
#line 74 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp6_ = self->priv->preview_playbin;
#line 74 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp7_ = flags;
#line 74 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_object_set ((GObject*) _tmp6_, "flags", _tmp7_, NULL);
#line 445 "PreviewPopover.c"
	{
		GstDiscoverer* _tmp8_ = NULL;
		GstDiscoverer* _tmp9_ = NULL;
		GstDiscovererInfo* info = NULL;
		GstDiscoverer* _tmp10_ = NULL;
		GstDiscoverer* _tmp11_ = NULL;
		const gchar* _tmp12_ = NULL;
		GstDiscovererInfo* _tmp13_ = NULL;
		GstDiscovererInfo* _tmp14_ = NULL;
		GList* video = NULL;
		GstDiscovererInfo* _tmp15_ = NULL;
		GList* _tmp16_ = NULL;
		gboolean _tmp17_ = FALSE;
		GList* _tmp18_ = NULL;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp9_ = gst_discoverer_new ((GstClockTime) (10 * GST_SECOND), &_inner_error_);
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp8_ = _tmp9_;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 466 "PreviewPopover.c"
			goto __catch5_g_error;
		}
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp10_ = _tmp8_;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp8_ = NULL;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp11_ = _tmp10_;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp12_ = uri;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp13_ = gst_discoverer_discover_uri (_tmp11_, _tmp12_, &_inner_error_);
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp14_ = _tmp13_;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_g_object_unref0 (_tmp11_);
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		info = _tmp14_;
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 77 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_g_object_unref0 (_tmp8_);
#line 489 "PreviewPopover.c"
			goto __catch5_g_error;
		}
#line 78 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp15_ = info;
#line 78 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp16_ = gst_discoverer_info_get_video_streams (_tmp15_);
#line 78 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		video = _tmp16_;
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp18_ = video;
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		if (_tmp18_ != NULL) {
#line 502 "PreviewPopover.c"
			GList* _tmp19_ = NULL;
			gconstpointer _tmp20_ = NULL;
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp19_ = video;
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp20_ = _tmp19_->data;
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp17_ = ((GstDiscovererStreamInfo*) _tmp20_) != NULL;
#line 511 "PreviewPopover.c"
		} else {
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp17_ = FALSE;
#line 515 "PreviewPopover.c"
		}
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		if (_tmp17_) {
#line 519 "PreviewPopover.c"
			GstDiscovererVideoInfo* video_info = NULL;
			GList* _tmp21_ = NULL;
			gconstpointer _tmp22_ = NULL;
			GstDiscovererVideoInfo* _tmp23_ = NULL;
			guint video_width = 0U;
			GstDiscovererVideoInfo* _tmp24_ = NULL;
			guint _tmp25_ = 0U;
			guint video_height = 0U;
			GstDiscovererVideoInfo* _tmp26_ = NULL;
			guint _tmp27_ = 0U;
			guint _tmp28_ = 0U;
			guint _tmp29_ = 0U;
			gdouble _tmp30_ = 0.0;
#line 80 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp21_ = video;
#line 80 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp22_ = _tmp21_->data;
#line 80 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp23_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST ((GstDiscovererStreamInfo*) _tmp22_, gst_discoverer_video_info_get_type (), GstDiscovererVideoInfo));
#line 80 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			video_info = _tmp23_;
#line 81 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp24_ = video_info;
#line 81 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp25_ = gst_discoverer_video_info_get_width (_tmp24_);
#line 81 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			video_width = _tmp25_;
#line 82 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp26_ = video_info;
#line 82 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp27_ = gst_discoverer_video_info_get_height (_tmp26_);
#line 82 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			video_height = _tmp27_;
#line 83 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp28_ = video_height;
#line 83 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp29_ = video_width;
#line 83 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			self->priv->ratio = ((gdouble) _tmp28_) / ((gdouble) _tmp29_);
#line 84 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_tmp30_ = self->priv->ratio;
#line 84 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			gtk_widget_set_size_request ((GtkWidget*) self, 200, (gint) (_tmp30_ * 200));
#line 79 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
			_g_object_unref0 (video_info);
#line 565 "PreviewPopover.c"
		}
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		__g_list_free__g_object_unref0_0 (video);
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_g_object_unref0 (info);
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_g_object_unref0 (_tmp8_);
#line 573 "PreviewPopover.c"
	}
	goto __finally5;
	__catch5_g_error:
	{
		GError* e = NULL;
		GError* _tmp31_ = NULL;
		const gchar* _tmp32_ = NULL;
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		e = _inner_error_;
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_inner_error_ = NULL;
#line 87 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp31_ = e;
#line 87 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp32_ = _tmp31_->message;
#line 87 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		g_warning ("PreviewPopover.vala:87: %s", _tmp32_);
#line 88 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_g_error_free0 (e);
#line 88 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		return;
#line 595 "PreviewPopover.c"
	}
	__finally5:
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		g_clear_error (&_inner_error_);
#line 76 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		return;
#line 606 "PreviewPopover.c"
	}
}


static Block2Data* block2_data_ref (Block2Data* _data2_) {
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return _data2_;
#line 616 "PreviewPopover.c"
}


static void block2_data_unref (void * _userdata_) {
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 625 "PreviewPopover.c"
		AudienceWidgetsPreviewPopover* self;
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		self = _data2_->self;
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_g_object_unref0 (self);
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		g_slice_free (Block2Data, _data2_);
#line 633 "PreviewPopover.c"
	}
}


static gboolean __lambda23_ (Block2Data* _data2_) {
	AudienceWidgetsPreviewPopover* self;
	gboolean result = FALSE;
	gdouble _tmp0_ = 0.0;
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self = _data2_->self;
#line 99 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp0_ = _data2_->progress;
#line 99 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	audience_widgets_preview_popover_set_preview_progress (self, _tmp0_);
#line 100 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	result = FALSE;
#line 100 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return result;
#line 652 "PreviewPopover.c"
}


static gboolean ___lambda23__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda23_ (self);
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return result;
#line 661 "PreviewPopover.c"
}


static guint* _uint_dup (guint* self) {
	guint* dup;
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	dup = g_new0 (guint, 1);
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	memcpy (dup, self, sizeof (guint));
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return dup;
#line 673 "PreviewPopover.c"
}


static gpointer __uint_dup0 (gpointer self) {
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	return self ? _uint_dup (self) : NULL;
#line 680 "PreviewPopover.c"
}


void audience_widgets_preview_popover_set_preview_progress (AudienceWidgetsPreviewPopover* self, gdouble progress) {
	Block2Data* _data2_;
	gdouble _tmp0_ = 0.0;
	gint64 length = 0LL;
	GstElement* _tmp1_ = NULL;
	gint64 _tmp2_ = 0LL;
	GstElement* _tmp3_ = NULL;
	gdouble _tmp4_ = 0.0;
	gdouble _tmp5_ = 0.0;
	GstElement* _tmp6_ = NULL;
	guint _tmp7_ = 0U;
	guint* _tmp8_ = NULL;
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_return_if_fail (self != NULL);
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_data2_ = g_slice_new0 (Block2Data);
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_data2_->_ref_count_ = 1;
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_data2_->self = g_object_ref (self);
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp0_ = progress;
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_data2_->progress = _tmp0_;
#line 93 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	audience_widgets_preview_popover_cancel_loop_timer (self);
#line 95 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp1_ = self->priv->preview_playbin;
#line 95 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gst_element_query_duration (_tmp1_, GST_FORMAT_TIME, &_tmp2_);
#line 95 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	length = _tmp2_;
#line 96 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp3_ = self->priv->preview_playbin;
#line 96 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp4_ = _data2_->progress;
#line 96 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp5_ = MAX (_tmp4_, 0.0);
#line 96 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gst_element_seek_simple (_tmp3_, GST_FORMAT_TIME, GST_SEEK_FLAG_FLUSH | GST_SEEK_FLAG_ACCURATE, (gint64) (_tmp5_ * length));
#line 97 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp6_ = self->priv->preview_playbin;
#line 97 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	gst_element_set_state (_tmp6_, GST_STATE_PLAYING);
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp7_ = g_timeout_add_seconds_full (G_PRIORITY_DEFAULT, (guint) 5, ___lambda23__gsource_func, block2_data_ref (_data2_), block2_data_unref);
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp8_ = __uint_dup0 (&_tmp7_);
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_free0 (self->priv->timer_id);
#line 98 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self->priv->timer_id = _tmp8_;
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	block2_data_unref (_data2_);
#line 92 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_data2_ = NULL;
#line 740 "PreviewPopover.c"
}


static void audience_widgets_preview_popover_cancel_loop_timer (AudienceWidgetsPreviewPopover* self) {
	guint* _tmp0_ = NULL;
#line 104 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_return_if_fail (self != NULL);
#line 105 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_tmp0_ = self->priv->timer_id;
#line 105 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	if (_tmp0_ != NULL) {
#line 752 "PreviewPopover.c"
		guint* _tmp1_ = NULL;
#line 106 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_tmp1_ = self->priv->timer_id;
#line 106 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		g_source_remove (*_tmp1_);
#line 107 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		_g_free0 (self->priv->timer_id);
#line 107 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
		self->priv->timer_id = NULL;
#line 762 "PreviewPopover.c"
	}
}


static void audience_widgets_preview_popover_class_init (AudienceWidgetsPreviewPopoverClass * klass) {
#line 21 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	audience_widgets_preview_popover_parent_class = g_type_class_peek_parent (klass);
#line 21 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	g_type_class_add_private (klass, sizeof (AudienceWidgetsPreviewPopoverPrivate));
#line 21 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	G_OBJECT_CLASS (klass)->finalize = audience_widgets_preview_popover_finalize;
#line 774 "PreviewPopover.c"
}


static void audience_widgets_preview_popover_instance_init (AudienceWidgetsPreviewPopover * self) {
#line 21 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self->priv = AUDIENCE_WIDGETS_PREVIEW_POPOVER_GET_PRIVATE (self);
#line 25 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self->priv->ratio = (gdouble) 0;
#line 26 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self->priv->timer_id = NULL;
#line 785 "PreviewPopover.c"
}


static void audience_widgets_preview_popover_finalize (GObject* obj) {
	AudienceWidgetsPreviewPopover * self;
#line 21 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, AUDIENCE_WIDGETS_TYPE_PREVIEW_POPOVER, AudienceWidgetsPreviewPopover);
#line 22 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (self->preview_actor);
#line 23 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (self->priv->preview_playbin);
#line 24 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_object_unref0 (self->priv->video);
#line 26 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	_g_free0 (self->priv->timer_id);
#line 21 "/home/stefano/Package/pantheon/audience-bzr/src/audience/src/Widgets/PreviewPopover.vala"
	G_OBJECT_CLASS (audience_widgets_preview_popover_parent_class)->finalize (obj);
#line 803 "PreviewPopover.c"
}


GType audience_widgets_preview_popover_get_type (void) {
	static volatile gsize audience_widgets_preview_popover_type_id__volatile = 0;
	if (g_once_init_enter (&audience_widgets_preview_popover_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (AudienceWidgetsPreviewPopoverClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) audience_widgets_preview_popover_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (AudienceWidgetsPreviewPopover), 0, (GInstanceInitFunc) audience_widgets_preview_popover_instance_init, NULL };
		GType audience_widgets_preview_popover_type_id;
		audience_widgets_preview_popover_type_id = g_type_register_static (gtk_popover_get_type (), "AudienceWidgetsPreviewPopover", &g_define_type_info, 0);
		g_once_init_leave (&audience_widgets_preview_popover_type_id__volatile, audience_widgets_preview_popover_type_id);
	}
	return audience_widgets_preview_popover_type_id__volatile;
}



